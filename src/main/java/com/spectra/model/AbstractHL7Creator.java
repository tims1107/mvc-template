package com.spectra.model;

import ca.uhn.hl7v2.HL7Exception;
import ca.uhn.hl7v2.model.AbstractMessage;
import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;

import com.spectra.scorpion.framework.exception.BusinessException;
import com.spectra.scorpion.framework.util.ApplicationProperties;
import org.apache.log4j.Logger;

import java.lang.reflect.Type;
import java.sql.Timestamp;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.*;

public abstract class AbstractHL7Creator implements HL7Creator {
	private Logger log = Logger.getLogger(AbstractHL7Creator.class);
	
	@Override
	public HL7Dto toHL7Dto(Map<String, List<PatientRecord>> listMap, GeneratorDto generatorDto) throws BusinessException {
		Gson gson = new Gson();
		String toJson = null;
		String toPMap = null;

		Type listType = new TypeToken<Map<String,List<PatientRecord>>>() {}.getType();
		Type pMapType = new TypeToken<Map<String,String>>() {}.getType();



		if(1 == 2)throw new BusinessException("");

		//String json = gson.toJson(target, listType);
		//List<String> target2 = gson.fromJson(json, listType);

		// System.out.println(json);
		//com.spectra.model.PatientRecord patientRecord = new com.spectra.model.PatientRecord();
		//BagOfPrimitives bagOfPrimitives = new BagOfPrimitives();

		//patientRecord.setAccessionNo("A1234");

		//Map<String, List<PatientRecord>> listMap = null;
		Map<String,Object> pMap = null;

		try {

			toJson = "{\"953459K\":[{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WN\",\"facilityId\":\"A114882\",\"accessionNo\":\"13953459K\",\"patientName\":\"QATBANANA,GOAYELLOW\",\"gender\":\"F\",\"altPatientId\":\"8000313661\",\"mrnId\":\"7000653614\",\"orderingPhyName\":\"HOWARD, CURLY\",\"drawFreq\":\"OTH\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"953459K\",\"subTestCode\":\"319N\",\"compoundTestCode\":\"319N\",\"dob\":\"May 5, 1973 12:00:00 AM\",\"specimenRecDateformat\":\"Jun 13, 2019 12:49:00 PM\",\"collectionDateformat\":\"Jun 12, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Jun 12, 2019 9:00:00 AM\",\"resRptStatusChngDtTimeformat\":\"Jun 13, 2019 4:00:00 PM\",\"obxList\":[{\"compoundTestCode\":\"319N\",\"subTestCode\":\"319N\",\"seqTestName\":\"RPR (T pallidum Confirm)\",\"seqResultName\":\"RPR (T pallidum Confirm)\",\"accessionNo\":\"13953459K\",\"orderNumber\":\"953459K\",\"textualNumResult\":\"Non-Reactive\",\"refRange\":\"Non-Reactive\",\"abnormalFlag\":\"N\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"N\",\"antibioticTextualNumResult\":\"Non-Reactive\",\"nteRecordList\":[],\"loincCode\":\"20507-0\",\"loincName\":\"Reagin Ab:ACnc:Pt:Ser:Ord:RPR\",\"sequenceNo\":1,\"collectionDateTime\":\"Jun 12, 2019 9:00:00 AM\",\"releaseDateTime\":\"Jun 13, 2019 4:00:00 PM\"}],\"nteList\":[{\"testNteComment\":\"Specimen has been sent for confirmatory test, results to follow.\",\"nteTestCode\":\"319N\",\"nteCompTestCode\":\"319N\",\"nteResultName\":\"RPR (T pallidum Confirm)\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"55 OHIO STREET\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"CRESSKILL\",\"patientAccountState\":\"NJ\",\"patientAccountZip\":\"07626\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"patientCounty\":\"Bergen\",\"releaseDate\":\"Jun 13, 2019 4:00:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5,\"patientOrigPhone\":\"\"},{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WN\",\"facilityId\":\"A114882\",\"accessionNo\":\"13953459K\",\"patientName\":\"QATBANANA,GOAYELLOW\",\"gender\":\"F\",\"altPatientId\":\"8000313661\",\"mrnId\":\"7000653614\",\"orderingPhyName\":\"HOWARD, CURLY\",\"drawFreq\":\"OTH\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"953459K\",\"subTestCode\":\"A409\",\"compoundTestCode\":\"9239\",\"dob\":\"May 5, 1973 12:00:00 AM\",\"specimenRecDateformat\":\"Jun 14, 2019 1:44:00 PM\",\"collectionDateformat\":\"Jun 12, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Jun 12, 2019 9:00:00 AM\",\"resRptStatusChngDtTimeformat\":\"Jun 14, 2019 1:44:00 PM\",\"obxList\":[{\"compoundTestCode\":\"9239\",\"subTestCode\":\"A409\",\"seqTestName\":\"T pallidum Ab (TP-PA)\",\"seqResultName\":\"T pallidum Ab by TP-PA\",\"accessionNo\":\"13953459K\",\"orderNumber\":\"953459K\",\"textualNumResult\":\"Reactive\",\"refRange\":\"Non Reactive\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"ARUP\",\"performingLabId\":\"OUTSEND\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Reactive\",\"nteRecordList\":[],\"loincCode\":\"24312-1\",\"loincName\":\"Treponema pallidum Ab:ACnc:Pt:Ser:Ord:Aggl\",\"sequenceNo\":1,\"collectionDateTime\":\"Jun 12, 2019 9:00:00 AM\",\"releaseDateTime\":\"Jun 14, 2019 1:44:00 PM\"}],\"nteList\":[{\"testNteComment\":\"Performed by ARUP Laboratories,\\r\\n500 Chipeta Way, SLC,UT 84108 800-522-2787\\r\\nwww.aruplab.com, Julio Delgado, MD, Lab. Director\",\"nteTestCode\":\"A409\",\"nteCompTestCode\":\"9239\",\"nteResultName\":\"T pallidum Ab by TP-PA\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"55 OHIO STREET\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"CRESSKILL\",\"patientAccountState\":\"NJ\",\"patientAccountZip\":\"07626\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"patientCounty\":\"Bergen\",\"releaseDate\":\"Jun 14, 2019 1:44:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"OUTSEND\",\"labFk\":5,\"patientOrigPhone\":\"\"},{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WN\",\"facilityId\":\"A114882\",\"accessionNo\":\"13953459K\",\"patientName\":\"QATBANANA,GOAYELLOW\",\"gender\":\"F\",\"altPatientId\":\"8000313661\",\"mrnId\":\"7000653614\",\"orderingPhyName\":\"HOWARD, CURLY\",\"drawFreq\":\"OTH\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"953459K\",\"subTestCode\":\"319T\",\"compoundTestCode\":\"319C\",\"dob\":\"May 5, 1973 12:00:00 AM\",\"specimenRecDateformat\":\"Jun 13, 2019 12:00:00 PM\",\"collectionDateformat\":\"Jun 12, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Jun 12, 2019 9:00:00 AM\",\"resRptStatusChngDtTimeformat\":\"Jun 13, 2019 12:49:00 PM\",\"obxList\":[{\"compoundTestCode\":\"319C\",\"subTestCode\":\"319T\",\"seqTestName\":\"Syphilis Test with Confirmation\",\"seqResultName\":\"Treponema pallidum Ab\",\"accessionNo\":\"13953459K\",\"orderNumber\":\"953459K\",\"textualNumResult\":\"Positive\",\"refRange\":\"Negative\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Positive\",\"nteRecordList\":[],\"loincCode\":\"47236-5\",\"loincName\":\"Treponema pallidum Ab.IgG+IgM:ACnc:Pt:Ser:Ord:EIA\",\"sequenceNo\":1,\"collectionDateTime\":\"Jun 12, 2019 9:00:00 AM\",\"releaseDateTime\":\"Jun 13, 2019 12:49:00 PM\"}],\"nteList\":[{\"nteTestCode\":\"319T\",\"nteCompTestCode\":\"319C\",\"nteResultName\":\"Treponema pallidum Ab\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"55 OHIO STREET\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"CRESSKILL\",\"patientAccountState\":\"NJ\",\"patientAccountZip\":\"07626\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"patientCounty\":\"Bergen\",\"releaseDate\":\"Jun 13, 2019 12:49:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5,\"patientOrigPhone\":\"\"}],\"QA0827B\":[{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WN\",\"facilityId\":\"A114882\",\"accessionNo\":\"13QA0827B\",\"patientName\":\"QATAPPLE,GOARED\",\"gender\":\"F\",\"altPatientId\":\"8000313657\",\"mrnId\":\"7000653610\",\"orderingPhyName\":\"HAPPY, HENRY\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"QA0827B\",\"subTestCode\":\"303\",\"compoundTestCode\":\"303\",\"dob\":\"Jan 1, 1969 12:00:00 AM\",\"specimenRecDateformat\":\"Aug 28, 2019 9:49:00 AM\",\"collectionDateformat\":\"Aug 26, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Aug 26, 2019 9:49:00 AM\",\"resRptStatusChngDtTimeformat\":\"Aug 28, 2019 9:50:00 AM\",\"obxList\":[{\"compoundTestCode\":\"303\",\"subTestCode\":\"303\",\"seqTestName\":\"Hep Be Ag (HBeAg)\",\"seqResultName\":\"HBeAg\",\"accessionNo\":\"13QA0827B\",\"orderNumber\":\"QA0827B\",\"textualNumResult\":\"Positive\",\"refRange\":\"Negative\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Positive\",\"nteRecordList\":[],\"loincCode\":\"31844-4\",\"loincName\":\"Hepatitis B virus little e Ag:ACnc:Pt:Ser:Ord:\",\"sequenceNo\":1,\"collectionDateTime\":\"Aug 26, 2019 9:49:00 AM\",\"releaseDateTime\":\"Aug 28, 2019 9:50:00 AM\"}],\"nteList\":[{\"nteTestCode\":\"303\",\"nteCompTestCode\":\"303\",\"nteResultName\":\"HBeAg\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"11 PRINCETON STREET\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"CRESSKILL\",\"patientAccountState\":\"NJ\",\"patientAccountZip\":\"07626\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"patientCounty\":\"Bergen\",\"releaseDate\":\"Aug 28, 2019 9:50:00 AM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5,\"patientOrigPhone\":\"\"}],\"0589ZAW\":[{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WR\",\"facilityId\":\"A114882\",\"accessionNo\":\"130589ZAW\",\"patientName\":\"TESTANNA,OLAF\",\"gender\":\"F\",\"altPatientId\":\"8000071199\",\"mrnId\":\"9694883506\",\"orderingPhyName\":\"TESTFOUR, FRED\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"0589ZAW\",\"subTestCode\":\"308\",\"compoundTestCode\":\"308\",\"dob\":\"Jan 1, 1970 12:00:00 AM\",\"specimenRecDateformat\":\"Jul 22, 2019 10:18:00 AM\",\"collectionDateformat\":\"Jul 19, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Jul 19, 2019 12:00:00 AM\",\"resRptStatusChngDtTimeformat\":\"Jul 24, 2019 8:14:00 PM\",\"obxList\":[{\"compoundTestCode\":\"308\",\"subTestCode\":\"308\",\"seqTestName\":\"Hep BcoreIgM (IgM anti-HBc)\",\"seqResultName\":\"IgM Anti-HBcore\",\"accessionNo\":\"130589ZAW\",\"orderNumber\":\"0589ZAW\",\"textualNumResult\":\"Positive\",\"refRange\":\"Negative\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Positive\",\"nteRecordList\":[],\"loincCode\":\"24113-3\",\"loincName\":\"Hepatitis B virus core Ab.IgM:ACnc:Pt:Ser/Plas:Ord:EIA\",\"sequenceNo\":1,\"collectionDateTime\":\"Jul 19, 2019 12:00:00 AM\",\"releaseDateTime\":\"Jul 24, 2019 8:14:00 PM\"}],\"nteList\":[{\"testNteComment\":\"Hep B Core IgM is intended for clinical diagnostic use. It should not be\\r\\nused for blood donor screening or for screening human cells, tissues or\\r\\ncellular and human based products. The performance of the assay has not\\r\\nbeen established for population of immunocompromised or immunosuppressed\\r\\npatients. A reactive/positive Hep B Core IgM result does not exclude\\r\\nco-infection by another hepatitis virus.\\r\\nAll equivocal and reactive/positive Hep B Core IgM results are reported\\r\\nto the State Department of Health.\\r\\n\",\"nteTestCode\":\"308\",\"nteCompTestCode\":\"308\",\"nteResultName\":\"IgM Anti-HBcore\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"\",\"patientAccountState\":\"\",\"patientAccountZip\":\"\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"releaseDate\":\"Jul 24, 2019 8:14:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5}],\"1045J0W\":[{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WP\",\"facilityId\":\"A114882\",\"accessionNo\":\"131045J0W\",\"patientName\":\"COWTEST,BELL\",\"gender\":\"M\",\"altPatientId\":\"8000072710\",\"mrnId\":\"7000147374\",\"orderingPhyName\":\"TESTFOUR, FRED\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"1045J0W\",\"subTestCode\":\"308\",\"compoundTestCode\":\"308\",\"dob\":\"Jun 8, 1964 12:00:00 AM\",\"specimenRecDateformat\":\"Aug 28, 2019 10:31:00 AM\",\"collectionDateformat\":\"Aug 25, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Aug 25, 2019 11:41:00 AM\",\"resRptStatusChngDtTimeformat\":\"Aug 28, 2019 12:08:00 PM\",\"obxList\":[{\"compoundTestCode\":\"308\",\"subTestCode\":\"308\",\"seqTestName\":\"Hep BcoreIgM (IgM anti-HBc)\",\"seqResultName\":\"IgM Anti-HBcore\",\"accessionNo\":\"131045J0W\",\"orderNumber\":\"1045J0W\",\"textualNumResult\":\"Positive\",\"refRange\":\"Negative\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Positive\",\"nteRecordList\":[],\"loincCode\":\"24113-3\",\"loincName\":\"Hepatitis B virus core Ab.IgM:ACnc:Pt:Ser/Plas:Ord:EIA\",\"sequenceNo\":1,\"collectionDateTime\":\"Aug 25, 2019 11:41:00 AM\",\"releaseDateTime\":\"Aug 28, 2019 12:08:00 PM\"}],\"nteList\":[{\"testNteComment\":\"Hep B Core IgM is intended for clinical diagnostic use. It should not be\\r\\nused for blood donor screening or for screening human cells, tissues or\\r\\ncellular and human based products. The performance of the assay has not\\r\\nbeen established for population of immunocompromised or immunosuppressed\\r\\npatients. A reactive/positive Hep B Core IgM result does not exclude\\r\\nco-infection by another hepatitis virus.\\r\\nAll equivocal and reactive/positive Hep B Core IgM results are reported\\r\\nto the State Department of Health.\\r\\n\",\"nteTestCode\":\"308\",\"nteCompTestCode\":\"308\",\"nteResultName\":\"IgM Anti-HBcore\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"\",\"patientAccountState\":\"\",\"patientAccountZip\":\"\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"releaseDate\":\"Aug 28, 2019 12:08:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5},{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WP\",\"facilityId\":\"A114882\",\"accessionNo\":\"131045J0W\",\"patientName\":\"COWTEST,BELL\",\"gender\":\"M\",\"altPatientId\":\"8000072710\",\"mrnId\":\"7000147374\",\"orderingPhyName\":\"TESTFOUR, FRED\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"1045J0W\",\"subTestCode\":\"301\",\"compoundTestCode\":\"301\",\"dob\":\"Jun 8, 1964 12:00:00 AM\",\"specimenRecDateformat\":\"Aug 28, 2019 10:31:00 AM\",\"collectionDateformat\":\"Aug 25, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Aug 25, 2019 11:41:00 AM\",\"resRptStatusChngDtTimeformat\":\"Aug 29, 2019 3:08:00 PM\",\"obxList\":[{\"compoundTestCode\":\"301\",\"subTestCode\":\"301\",\"seqTestName\":\"Hep B Surface Ag (HBsAg)\",\"seqResultName\":\"HBsAg\",\"accessionNo\":\"131045J0W\",\"orderNumber\":\"1045J0W\",\"textualNumResult\":\"Positive\",\"refRange\":\"Negative\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Positive\",\"nteRecordList\":[],\"loincCode\":\"5195-3\",\"loincName\":\"Hepatitis B virus surface Ag:ACnc:Pt:Ser:Ord:\",\"sequenceNo\":1,\"collectionDateTime\":\"Aug 25, 2019 11:41:00 AM\",\"releaseDateTime\":\"Aug 29, 2019 3:08:00 PM\"}],\"nteList\":[{\"testNteComment\":\"Custom Alert\\r\\nNewly confirmed Positive HBsAg by neutralization test. Interpret with\\r\\ncaution if patient recently received hepatitis vaccination. Recombinant\\r\\nHBsAg vaccination has been found to be the most common cause of\\r\\ntransient detectable HBsAg in dialysis patients, which can persist for\\r\\nup to 28 days. HBV DNA test may be useful in clarifying the presence of\\r\\nHepatitis B virus.\",\"nteTestCode\":\"301\",\"nteCompTestCode\":\"301\",\"nteResultName\":\"HBsAg\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"\",\"patientAccountState\":\"\",\"patientAccountZip\":\"\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"releaseDate\":\"Aug 29, 2019 3:08:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5},{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WP\",\"facilityId\":\"A114882\",\"accessionNo\":\"131045J0W\",\"patientName\":\"COWTEST,BELL\",\"gender\":\"M\",\"altPatientId\":\"8000072710\",\"mrnId\":\"7000147374\",\"orderingPhyName\":\"TESTFOUR, FRED\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"1045J0W\",\"subTestCode\":\"312\",\"compoundTestCode\":\"312\",\"dob\":\"Jun 8, 1964 12:00:00 AM\",\"specimenRecDateformat\":\"Aug 28, 2019 10:31:00 AM\",\"collectionDateformat\":\"Aug 25, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Aug 25, 2019 11:41:00 AM\",\"resRptStatusChngDtTimeformat\":\"Aug 28, 2019 11:56:00 AM\",\"obxList\":[{\"compoundTestCode\":\"312\",\"subTestCode\":\"312\",\"seqTestName\":\"Hep A Ab IgM (IgM anti-HAV)\",\"seqResultName\":\"IgM Anti-HAV\",\"accessionNo\":\"131045J0W\",\"orderNumber\":\"1045J0W\",\"textualNumResult\":\"Positive\",\"refRange\":\"Negative\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Positive\",\"nteRecordList\":[],\"loincCode\":\"22314-9\",\"loincName\":\"Hepatitis A virus Ab.IgM:ACnc:Pt:Ser:Ord:\",\"sequenceNo\":1,\"collectionDateTime\":\"Aug 25, 2019 11:41:00 AM\",\"releaseDateTime\":\"Aug 28, 2019 11:56:00 AM\"}],\"nteList\":[{\"testNteComment\":\"Anti-HAV IgM is detected at the onset of acute Hep A infection and\\r\\ncontinues to be detectable for 4-8 weeks. All equivocal and\\r\\nreactive/positive HAV IgM results are reported to the State Department\\r\\nof Health.\",\"nteTestCode\":\"312\",\"nteCompTestCode\":\"312\",\"nteResultName\":\"IgM Anti-HAV\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"\",\"patientAccountState\":\"\",\"patientAccountZip\":\"\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"releaseDate\":\"Aug 28, 2019 11:56:00 AM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5}],\"95375YK\":[{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WN\",\"facilityId\":\"A114882\",\"accessionNo\":\"0395375YK\",\"patientName\":\"AATHREE,IMMUNO\",\"gender\":\"M\",\"altPatientId\":\"8000054948\",\"mrnId\":\"9694872104\",\"orderingPhyName\":\"HAPPY, HENRY\",\"drawFreq\":\"OTH\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"95375YK\",\"subTestCode\":\"335\",\"compoundTestCode\":\"335\",\"dob\":\"Jan 23, 1950 12:00:00 AM\",\"specimenRecDateformat\":\"Aug 12, 2019 1:49:00 PM\",\"collectionDateformat\":\"Aug 11, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Aug 11, 2019 12:00:00 AM\",\"resRptStatusChngDtTimeformat\":\"Aug 13, 2019 1:40:00 PM\",\"obxList\":[{\"compoundTestCode\":\"335\",\"subTestCode\":\"335\",\"seqTestName\":\"HIV1/2 Ab Screen\",\"seqResultName\":\"HIV1/2 Ab Screen\",\"accessionNo\":\"0395375YK\",\"orderNumber\":\"95375YK\",\"textualNumResult\":\"Reactive\",\"refRange\":\"Non-reactive\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Reactive\",\"nteRecordList\":[],\"loincCode\":\"48345-3\",\"loincName\":\"HIV 1+O+2 Ab:ACnc:Pt:Ser/Plas:Ord:\",\"sequenceNo\":1,\"collectionDateTime\":\"Aug 11, 2019 12:00:00 AM\",\"releaseDateTime\":\"Aug 13, 2019 1:40:00 PM\"}],\"nteList\":[{\"testNteComment\":\"a) Reactive specimens must be confirmed using supplemental tests for\\r\\nHIV-1 and/or HIV-2. Spectra has referred this sample for HIV-1 Ab\\r\\nWestern Blot testing. Please refer to HIV-1 Ab Confirm, WB result for\\r\\nfinal interpretation of patient status.\\r\\nb) Early, acute HIV-1 infection may not be detected by this assay.\\r\\nc) Screen test was performed using ADVIA Centaur chemiluminescent\\r\\nimmunoassay. Values obtained with different assay methods cannot be used\\r\\ninterchangeably.\",\"nteTestCode\":\"335\",\"nteCompTestCode\":\"335\",\"nteResultName\":\"HIV1/2 Ab Screen\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"71 LARCH AVE\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"DUMONT\",\"patientAccountState\":\"NJ\",\"patientAccountZip\":\"07628\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"patientCounty\":\"Bergen\",\"releaseDate\":\"Aug 13, 2019 1:40:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5,\"patientOrigPhone\":\"\"}],\"0588ZAW\":[{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WN\",\"facilityId\":\"A114882\",\"accessionNo\":\"030588ZAW\",\"patientName\":\"OAKTEST,OLIVIA\",\"gender\":\"F\",\"altPatientId\":\"8000075646\",\"patientSsn\":\"400112111\",\"mrnId\":\"7000273805\",\"orderingPhyName\":\"TESTONE, THOMAS\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"0588ZAW\",\"subTestCode\":\"335\",\"compoundTestCode\":\"335\",\"dob\":\"Feb 28, 1934 12:00:00 AM\",\"specimenRecDateformat\":\"Jul 22, 2019 10:32:00 AM\",\"collectionDateformat\":\"Jul 19, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Jul 19, 2019 12:00:00 AM\",\"resRptStatusChngDtTimeformat\":\"Jul 22, 2019 1:53:00 PM\",\"obxList\":[{\"compoundTestCode\":\"335\",\"subTestCode\":\"335\",\"seqTestName\":\"HIV1/2 Ab Screen\",\"seqResultName\":\"HIV1/2 Ab Screen\",\"accessionNo\":\"030588ZAW\",\"orderNumber\":\"0588ZAW\",\"textualNumResult\":\"Reactive\",\"refRange\":\"Non-reactive\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Reactive\",\"nteRecordList\":[],\"loincCode\":\"48345-3\",\"loincName\":\"HIV 1+O+2 Ab:ACnc:Pt:Ser/Plas:Ord:\",\"sequenceNo\":1,\"collectionDateTime\":\"Jul 19, 2019 12:00:00 AM\",\"releaseDateTime\":\"Jul 22, 2019 1:53:00 PM\"}],\"nteList\":[{\"testNteComment\":\"a) Reactive specimens must be confirmed using supplemental tests for\\r\\nHIV-1 and/or HIV-2. Spectra has referred this sample for HIV-1 Ab\\r\\nWestern Blot testing. Please refer to HIV-1 Ab Confirm, WB result for\\r\\nfinal interpretation of patient status.\\r\\nb) Early, acute HIV-1 infection may not be detected by this assay.\\r\\nc) Screen test was performed using ADVIA Centaur chemiluminescent\\r\\nimmunoassay. Values obtained with different assay methods cannot be used\\r\\ninterchangeably.\",\"nteTestCode\":\"335\",\"nteCompTestCode\":\"335\",\"nteResultName\":\"HIV1/2 Ab Screen\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"\",\"patientAccountState\":\"\",\"patientAccountZip\":\"\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"releaseDate\":\"Jul 22, 2019 1:53:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5}],\"8350Z9W\":[{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WR\",\"facilityId\":\"A114882\",\"accessionNo\":\"138350Z9W\",\"patientName\":\"ADTKORDUPTEST,TESTROKUSCEN\",\"gender\":\"F\",\"altPatientId\":\"8000070090\",\"patientSsn\":\"836154701\",\"mrnId\":\"9694883081\",\"orderingPhyName\":\"HAPPY, HENRY\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"8350Z9W\",\"subTestCode\":\"301\",\"compoundTestCode\":\"301\",\"dob\":\"Jan 15, 1947 12:00:00 AM\",\"specimenRecDateformat\":\"Jul 29, 2019 10:31:00 AM\",\"collectionDateformat\":\"Jul 24, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Jul 24, 2019 12:00:00 AM\",\"resRptStatusChngDtTimeformat\":\"Jul 29, 2019 2:08:00 PM\",\"obxList\":[{\"compoundTestCode\":\"301\",\"subTestCode\":\"301\",\"seqTestName\":\"Hep B Surface Ag (HBsAg)\",\"seqResultName\":\"HBsAg\",\"accessionNo\":\"138350Z9W\",\"orderNumber\":\"8350Z9W\",\"textualNumResult\":\"Positive\",\"refRange\":\"Negative\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Positive\",\"nteRecordList\":[],\"loincCode\":\"5195-3\",\"loincName\":\"Hepatitis B virus surface Ag:ACnc:Pt:Ser:Ord:\",\"sequenceNo\":1,\"collectionDateTime\":\"Jul 24, 2019 12:00:00 AM\",\"releaseDateTime\":\"Jul 29, 2019 2:08:00 PM\"}],\"nteList\":[{\"testNteComment\":\"Custom Alert\\r\\nNewly confirmed Positive HBsAg by neutralization test. Interpret with\\r\\ncaution if patient recently received hepatitis vaccination. Recombinant\\r\\nHBsAg vaccination has been found to be the most common cause of\\r\\ntransient detectable HBsAg in dialysis patients, which can persist for\\r\\nup to 28 days. HBV DNA test may be useful in clarifying the presence of\\r\\nHepatitis B virus.\",\"nteTestCode\":\"301\",\"nteCompTestCode\":\"301\",\"nteResultName\":\"HBsAg\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"\",\"patientAccountState\":\"\",\"patientAccountZip\":\"\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"releaseDate\":\"Jul 29, 2019 2:08:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5}],\"0578ZAW\":[{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WN\",\"facilityId\":\"A114882\",\"accessionNo\":\"030578ZAW\",\"patientName\":\"OCTOBERTEST,OCTAVIA\",\"gender\":\"F\",\"altPatientId\":\"8000075686\",\"patientSsn\":\"400112499\",\"mrnId\":\"7000273863\",\"orderingPhyName\":\"HAPPY, HENRY\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"0578ZAW\",\"subTestCode\":\"335\",\"compoundTestCode\":\"335\",\"dob\":\"Feb 4, 1979 12:00:00 AM\",\"specimenRecDateformat\":\"Jul 22, 2019 10:34:00 AM\",\"collectionDateformat\":\"Jul 19, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Jul 19, 2019 12:00:00 AM\",\"resRptStatusChngDtTimeformat\":\"Jul 22, 2019 1:55:00 PM\",\"obxList\":[{\"compoundTestCode\":\"335\",\"subTestCode\":\"335\",\"seqTestName\":\"HIV1/2 Ab Screen\",\"seqResultName\":\"HIV1/2 Ab Screen\",\"accessionNo\":\"030578ZAW\",\"orderNumber\":\"0578ZAW\",\"textualNumResult\":\"Reactive\",\"refRange\":\"Non-reactive\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Reactive\",\"nteRecordList\":[],\"loincCode\":\"48345-3\",\"loincName\":\"HIV 1+O+2 Ab:ACnc:Pt:Ser/Plas:Ord:\",\"sequenceNo\":1,\"collectionDateTime\":\"Jul 19, 2019 12:00:00 AM\",\"releaseDateTime\":\"Jul 22, 2019 1:55:00 PM\"}],\"nteList\":[{\"testNteComment\":\"a) Reactive specimens must be confirmed using supplemental tests for\\r\\nHIV-1 and/or HIV-2. Spectra has referred this sample for HIV-1 Ab\\r\\nWestern Blot testing. Please refer to HIV-1 Ab Confirm, WB result for\\r\\nfinal interpretation of patient status.\\r\\nb) Early, acute HIV-1 infection may not be detected by this assay.\\r\\nc) Screen test was performed using ADVIA Centaur chemiluminescent\\r\\nimmunoassay. Values obtained with different assay methods cannot be used\\r\\ninterchangeably.\",\"nteTestCode\":\"335\",\"nteCompTestCode\":\"335\",\"nteResultName\":\"HIV1/2 Ab Screen\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"\",\"patientAccountState\":\"\",\"patientAccountZip\":\"\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"releaseDate\":\"Jul 22, 2019 1:55:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5}],\"QA0627C\":[{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WN\",\"facilityId\":\"A114882\",\"accessionNo\":\"03QA0627C\",\"patientName\":\"QATAPPLE,GOARED\",\"gender\":\"F\",\"altPatientId\":\"8000313657\",\"mrnId\":\"7000653610\",\"orderingPhyName\":\"HAPPY, HENRY\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"QA0627C\",\"subTestCode\":\"335\",\"compoundTestCode\":\"335\",\"dob\":\"Jan 1, 1969 12:00:00 AM\",\"specimenRecDateformat\":\"Jun 27, 2019 10:39:00 AM\",\"collectionDateformat\":\"Jun 25, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Jun 25, 2019 10:39:00 AM\",\"resRptStatusChngDtTimeformat\":\"Jun 27, 2019 1:15:00 PM\",\"obxList\":[{\"compoundTestCode\":\"335\",\"subTestCode\":\"335\",\"seqTestName\":\"HIV1/2 Ab Screen\",\"seqResultName\":\"HIV1/2 Ab Screen\",\"accessionNo\":\"03QA0627C\",\"orderNumber\":\"QA0627C\",\"textualNumResult\":\"Reactive\",\"refRange\":\"Non-reactive\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Reactive\",\"nteRecordList\":[],\"loincCode\":\"48345-3\",\"loincName\":\"HIV 1+O+2 Ab:ACnc:Pt:Ser/Plas:Ord:\",\"sequenceNo\":1,\"collectionDateTime\":\"Jun 25, 2019 10:39:00 AM\",\"releaseDateTime\":\"Jun 27, 2019 1:15:00 PM\"}],\"nteList\":[{\"testNteComment\":\"a) Reactive specimens must be confirmed using supplemental tests for\\r\\nHIV-1 and/or HIV-2. Spectra has referred this sample for HIV-1 Ab\\r\\nWestern Blot testing. Please refer to HIV-1 Ab Confirm, WB result for\\r\\nfinal interpretation of patient status.\\r\\nb) Early, acute HIV-1 infection may not be detected by this assay.\\r\\nc) Screen test was performed using ADVIA Centaur chemiluminescent\\r\\nimmunoassay. Values obtained with different assay methods cannot be used\\r\\ninterchangeably.\",\"nteTestCode\":\"335\",\"nteCompTestCode\":\"335\",\"nteResultName\":\"HIV1/2 Ab Screen\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"11 PRINCETON STREET\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"CRESSKILL\",\"patientAccountState\":\"NJ\",\"patientAccountZip\":\"07626\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"patientCounty\":\"Bergen\",\"releaseDate\":\"Jun 27, 2019 1:15:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5,\"patientOrigPhone\":\"\"}],\"95343WK\":[{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WN\",\"facilityId\":\"A114882\",\"accessionNo\":\"5095343WK\",\"patientName\":\"KORUSACUTE,FOUR\",\"gender\":\"M\",\"altPatientId\":\"8000307419\",\"patientSsn\":\"157010126\",\"mrnId\":\"7000428320\",\"orderingPhyName\":\"HAPPY, HENRY\",\"drawFreq\":\"OTH\",\"requisitionStatus\":\"F\",\"specimenSource\":\"PD Fluid\",\"orderNumber\":\"95343WK\",\"subTestCode\":\"736C\",\"compoundTestCode\":\"736\",\"dob\":\"Jan 1, 1980 12:00:00 AM\",\"specimenRecDateformat\":\"Jun 13, 2019 2:23:00 PM\",\"collectionDateformat\":\"Jun 12, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Jun 12, 2019 12:00:00 AM\",\"resRptStatusChngDtTimeformat\":\"Jun 15, 2019 3:19:00 PM\",\"obxList\":[{\"compoundTestCode\":\"736\",\"subTestCode\":\"736C\",\"seqTestName\":\"Culture, PD Fluid Aer \\\\T\\\\ Anaer W/Gr Stain\",\"seqResultName\":\"Isolate #1\",\"accessionNo\":\"5095343WK\",\"orderNumber\":\"95343WK\",\"textualNumResult\":\"Streptococcus agalactiae (Beta Hemolytic Streptococci Group B)\",\"abnormalFlag\":\"2\",\"resultStatus\":\"F\",\"orderMethod\":\"MICRO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"2\",\"antibioticTextualNumResult\":\"Streptococcus agalactiae (Beta Hemolytic Streptococci Group B)\",\"nteRecordList\":[],\"sequenceNo\":0,\"microOrganismName\":\"Streptococcus agalactiae (Beta Hemolytic Streptococci Group B)\",\"collectionDateTime\":\"Jun 12, 2019 12:00:00 AM\",\"releaseDateTime\":\"Jun 15, 2019 3:19:00 PM\"}],\"nteList\":[{\"nteTestCode\":\"736C\",\"nteCompTestCode\":\"736\",\"nteResultName\":\"Isolate #1\",\"sequenceNo\":0}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"\",\"patientAccountState\":\"\",\"patientAccountZip\":\"\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"releaseDate\":\"Jun 15, 2019 3:19:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5}],\"1043JU0\":[{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WN\",\"facilityId\":\"A114882\",\"accessionNo\":\"031043JU0\",\"patientName\":\"ASPENTEST,ASTON\",\"gender\":\"M\",\"altPatientId\":\"8000075655\",\"patientSsn\":\"400112199\",\"mrnId\":\"7000273831\",\"orderingPhyName\":\"HAPPY, HENRY\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"1043JU0\",\"subTestCode\":\"335\",\"compoundTestCode\":\"335\",\"dob\":\"Dec 12, 1955 12:00:00 AM\",\"specimenRecDateformat\":\"Aug 28, 2019 10:51:00 AM\",\"collectionDateformat\":\"Aug 27, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Aug 27, 2019 10:50:00 AM\",\"resRptStatusChngDtTimeformat\":\"Aug 28, 2019 1:01:00 PM\",\"obxList\":[{\"compoundTestCode\":\"335\",\"subTestCode\":\"335\",\"seqTestName\":\"HIV1/2 Ab Screen\",\"seqResultName\":\"HIV1/2 Ab Screen\",\"accessionNo\":\"031043JU0\",\"orderNumber\":\"1043JU0\",\"textualNumResult\":\"Reactive\",\"refRange\":\"Non-reactive\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Reactive\",\"nteRecordList\":[],\"loincCode\":\"48345-3\",\"loincName\":\"HIV 1+O+2 Ab:ACnc:Pt:Ser/Plas:Ord:\",\"sequenceNo\":1,\"collectionDateTime\":\"Aug 27, 2019 10:50:00 AM\",\"releaseDateTime\":\"Aug 28, 2019 1:01:00 PM\"}],\"nteList\":[{\"testNteComment\":\"a) Reactive specimens must be confirmed using supplemental tests for\\r\\nHIV-1 and/or HIV-2. Spectra has referred this sample for HIV-1 Ab\\r\\nWestern Blot testing. Please refer to HIV-1 Ab Confirm, WB result for\\r\\nfinal interpretation of patient status.\\r\\nb) Early, acute HIV-1 infection may not be detected by this assay.\\r\\nc) Screen test was performed using ADVIA Centaur chemiluminescent\\r\\nimmunoassay. Values obtained with different assay methods cannot be used\\r\\ninterchangeably.\",\"nteTestCode\":\"335\",\"nteCompTestCode\":\"335\",\"nteResultName\":\"HIV1/2 Ab Screen\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"\",\"patientAccountState\":\"\",\"patientAccountZip\":\"\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"releaseDate\":\"Aug 28, 2019 1:01:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5}],\"95345BK\":[{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WN\",\"facilityId\":\"A114882\",\"accessionNo\":\"1395345BK\",\"patientName\":\"QATESTZAL,TESTNJADD\",\"gender\":\"M\",\"altPatientId\":\"8000312230\",\"mrnId\":\"7000559736\",\"orderingPhyName\":\"HAPPY, HENRY\",\"drawFreq\":\"OTH\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"95345BK\",\"subTestCode\":\"319N\",\"compoundTestCode\":\"319N\",\"dob\":\"Mar 12, 1955 12:00:00 AM\",\"specimenRecDateformat\":\"Jun 13, 2019 12:49:00 PM\",\"collectionDateformat\":\"Jun 12, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Jun 12, 2019 9:00:00 AM\",\"resRptStatusChngDtTimeformat\":\"Jun 13, 2019 4:01:00 PM\",\"obxList\":[{\"compoundTestCode\":\"319N\",\"subTestCode\":\"319N\",\"seqTestName\":\"RPR (T pallidum Confirm)\",\"seqResultName\":\"RPR (T pallidum Confirm)\",\"accessionNo\":\"1395345BK\",\"orderNumber\":\"95345BK\",\"textualNumResult\":\"Reactive 1:2\",\"refRange\":\"Non-Reactive\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Reactive 1:2\",\"nteRecordList\":[],\"loincCode\":\"20507-0\",\"loincName\":\"Reagin Ab:ACnc:Pt:Ser:Ord:RPR\",\"sequenceNo\":1,\"collectionDateTime\":\"Jun 12, 2019 9:00:00 AM\",\"releaseDateTime\":\"Jun 13, 2019 4:01:00 PM\"}],\"nteList\":[{\"testNteComment\":\"Presumptive current infection. Biological False Positive possible with\\r\\nappropriate clinical history. Additional testing as suggested by\\r\\nclinical assessment.\",\"nteTestCode\":\"319N\",\"nteCompTestCode\":\"319N\",\"nteResultName\":\"RPR (T pallidum Confirm)\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"33 RUTGERS ROAD\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"NORTHVALE\",\"patientAccountState\":\"NJ\",\"patientAccountZip\":\"07647\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"patientCounty\":\"Bergen\",\"releaseDate\":\"Jun 13, 2019 4:01:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5,\"patientOrigPhone\":\"\"},{\"mhsOrderingFacId\":\"A114882\",\"cid\":\"9WN\",\"facilityId\":\"A114882\",\"accessionNo\":\"1395345BK\",\"patientName\":\"QATESTZAL,TESTNJADD\",\"gender\":\"M\",\"altPatientId\":\"8000312230\",\"mrnId\":\"7000559736\",\"orderingPhyName\":\"HAPPY, HENRY\",\"drawFreq\":\"OTH\",\"requisitionStatus\":\"F\",\"specimenSource\":\"Serum\",\"orderNumber\":\"95345BK\",\"subTestCode\":\"319T\",\"compoundTestCode\":\"319C\",\"dob\":\"Mar 12, 1955 12:00:00 AM\",\"specimenRecDateformat\":\"Jun 13, 2019 12:00:00 PM\",\"collectionDateformat\":\"Jun 12, 2019 12:00:00 AM\",\"collectionTimeformat\":\"Jun 12, 2019 9:00:00 AM\",\"resRptStatusChngDtTimeformat\":\"Jun 13, 2019 12:49:00 PM\",\"obxList\":[{\"compoundTestCode\":\"319C\",\"subTestCode\":\"319T\",\"seqTestName\":\"Syphilis Test with Confirmation\",\"seqResultName\":\"Treponema pallidum Ab\",\"accessionNo\":\"1395345BK\",\"orderNumber\":\"95345BK\",\"textualNumResult\":\"Positive\",\"refRange\":\"Negative\",\"abnormalFlag\":\"A\",\"resultStatus\":\"F\",\"orderMethod\":\"IMMUNO\",\"performingLabId\":\"SE\",\"sensitivityFlag\":\"A\",\"antibioticTextualNumResult\":\"Positive\",\"nteRecordList\":[],\"loincCode\":\"47236-5\",\"loincName\":\"Treponema pallidum Ab.IgG+IgM:ACnc:Pt:Ser:Ord:EIA\",\"sequenceNo\":1,\"collectionDateTime\":\"Jun 12, 2019 9:00:00 AM\",\"releaseDateTime\":\"Jun 13, 2019 12:49:00 PM\"}],\"nteList\":[{\"nteTestCode\":\"319T\",\"nteCompTestCode\":\"319C\",\"nteResultName\":\"Treponema pallidum Ab\",\"sequenceNo\":1}],\"facilityName\":\"Korus Test Hemo\",\"facilityAddress1\":\"8 King Road\",\"facilityAddress2\":\"Test\",\"facilityCity\":\"Rockleigh\",\"facilityState\":\"NJ\",\"facilityZip\":\"07647\",\"facilityPhone\":\"\",\"facilityAreaCode\":\"800\",\"facilityPhoneNumber\":\"5224662\",\"patientAccountAddress1\":\"33 RUTGERS ROAD\",\"patientAccountAddress2\":\"\",\"patientAccountCity\":\"NORTHVALE\",\"patientAccountState\":\"NJ\",\"patientAccountZip\":\"07647\",\"patientHomeAreaCode\":\"\",\"patientHomePhone\":\"\",\"patientCounty\":\"Bergen\",\"releaseDate\":\"Jun 13, 2019 12:49:00 PM\",\"actiFacilityId\":\"A114882\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"performingLabId\":\"SE\",\"labFk\":5,\"patientOrigPhone\":\"\"}]}";
			toPMap = "{\"infoSpectraAddress\":\"8 King Road\",\"fileReceivingFacility\":\"NJDOH^2.16.840.1.113883.3.1299^ISO\",\"sendingFacilityIdType\":\"CLIA\",\"infoSpectraAddress2\":\"Rockleigh, NJ 07647\",\"infoSpectraZip\":\"07647\",\"mshFileSendingFacility\":\"Spectra East\",\"fileReceivingApplication\":\"ELRS^2.16.840.1.113883.3.1299.5.1.6.1^ISO\",\"infoSpectraCity\":\"Rockleigh\",\"medicalDirector\":\"Stylianos Lomvardias, MD\",\"mshSendingApplication\":\"EAST\",\"infoSpectraState\":\"NJ\",\"hapiCustomPackage\":\"com.spectra.asr.hl7v2.model.v23\",\"msgProfileId\":\"\",\"mshSendingFacilityId\":\"31D0961672\"}";
			listMap = gson.fromJson(toJson,listType);
			pMap = gson.fromJson(toPMap,pMapType);

			System.out.println(pMap.get("infoSpectraZip"));

			Set<String> keySet = listMap.keySet();

			DateFormat dateFormat = new SimpleDateFormat("yyyyMMddHHmm");
			Date date = new Date();

			DateFormat dateFormat2 = new SimpleDateFormat("yyyyMMdd");
			Date date2 = new Date();

			pMap.put("dateFormat",dateFormat);
			pMap.put("dateFormat2",dateFormat2);

			for(String key : keySet) {

				toJson = null;
				List<PatientRecord> patientRecordList = listMap.get(key);
				for(com.spectra.model.PatientRecord patientRecord : patientRecordList) {
//                    toJson = gson.toJson(patientRecord, PatientRecord.class);
//                    System.out.println(toJson);
					AbstractMessage hl7Message = null;
					hl7Message = this.getMessage(patientRecord, pMap);
					//hl7Test.getMessage(patientRecord,pMap);
				}
			}

			return null;
			//System.out.println(patientRecord.getAccessionNo());
		} catch (Exception e){
			e.printStackTrace();
		}

		return null;
	}
/*
	@Override
	public AbstractMessage getMessage(PatientRecord patientRecord) throws HL7Exception {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public String getPipedHL7Message(AbstractMessage hl7Message) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public String getXmlHL7Message(AbstractMessage hl7Message) {
		// TODO Auto-generated method stub
		return null;
	}
*/
}
